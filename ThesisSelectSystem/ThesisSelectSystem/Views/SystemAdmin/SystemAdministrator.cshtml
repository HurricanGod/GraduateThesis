
@{
    Layout = null;

}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>系统管理员</title>
    <link rel="stylesheet" type="text/css" href="~/Content/SystemAdministrator/bootstrap-select.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/SystemAdministrator/system-administrator.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/SystemAdministrator/wangEditor.css" />

    
</head>
<body>

    <header>

        <figure class="adim">
            <a href="#">
                <span class="glyphicon glyphicon-leaf"></span>
                <figcaption>梁婉玲</figcaption>
            </a>
        </figure>

        <div class="setting">
            <a id="setting" href="#">
                <span class="glyphicon  glyphicon-tasks"></span>
                <span class="glyphicon glyphicon-chevron-down"></span>
            </a>

        </div>

        <a href="#">
            <div class="warn">
                <span class="glyphicon glyphicon-bell"></span>
                <span class="badge">14</span>
            </div>
        </a>

        <a href="#">
            <div class="email">
                <span class="glyphicon glyphicon-envelope"></span>
                <span class="badge">5</span>
            </div>
        </a>

    </header>

    <div class="content ">

        <aside class="vertical ">
            <ul>
                <li class="system">
                    <a id="system" class="system" href="#">
                        <span class="glyphicon glyphicon-cog"></span>
                        系统设置
                        <img id="more" src=@Url.Content("~/img/SystemAdministrator/more.png") />
                    </a>
                    <ul id="system-setup" class="system-setup ">
                        <li id="writrAnoucement">
                            <a class="a" href="#">
                                <span class="glyphicon glyphicon-certificate"></span>
                                公告
                            </a>
                        </li>
                        <li id="setGrade">
                            <a class="a" href="#">
                                <span class="glyphicon glyphicon-tint"></span>
                                设置界别
                            </a>
                        </li>
                    </ul>

                </li>

                <li class="apratment">
                    <a id="apartment" href="#">
                        <span class="glyphicon glyphicon-th-list"></span>
                        学院设置
                        <img id="more" src=@Url.Content("~/img/SystemAdministrator/more.png") />

                        <ul id="apartment-setup" class="apartment-setup">
                            <li id="addAparment"><a class="a" href="#"><span class="glyphicon glyphicon-plus"></span>添加学院</a></li>
                            <li id="deleteAparment"><a class="a" href="#"><span class="glyphicon glyphicon-minus"></span>删除学院</a></li>
                            <li id="addAminstrator"><a class="a" href="#"><span class="glyphicon glyphicon-eye-open"></span>添加管理员</a></li>
                            <li id="deleteAminstrator"><a class="a" href="#"><span class="glyphicon glyphicon-remove"></span>删除管理员</a></li>
                            <li id="subject-setup"><a class="a" href="#"><span class="glyphicon glyphicon-th-large"></span>专业管理</a></li>
                        </ul>
                    </a>

                </li>
                <li id="interface">
                    <a href="#"><span class="glyphicon glyphicon-pencil"></span>界面设置</a>
                </li>
            </ul>
        </aside>


        <div class="contain">

            <div class="daohang">

                <div class="search col-xs-2">

                    <div class="input-group">
                        <input class="form-control" placeholder="search" />
                        <span class="input-group-btn">
                            <button class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
                        </span>
                    </div>

                </div>
            </div>

            <div class="anm-main">

                <div class="announcement">
                    <div class="anm">
                        <i class="glyphicon glyphicon-edit"></i>
                        <span>发布公告</span>
                    </div>
                    <div class="a1">
                        <div class="form-group">
                            <form id="annoucement" >
                                <div class="anm-select">
                                    <span class="rang">公告范围</span>
                                    <div class="select">
                                        <select id="announcement-scope" class="selectpicker show-tick" multiple value="<%=search.type||''%>" required>
                                            @foreach (var department in ViewBag.departments)
                                            {
                                                <option>@department</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                                <div class="topic">
                                    <span class="topic-font"> 公告主题</span>
                                    <input class="top-input form-control" type="text" style="display:none;" id="Aid" />
                                    <input class="top-input form-control" type="text" required placeholder="主题" id="Atitle"/>
                                </div>

                                <div class="anm-conten">
                                    <span>正文</span>
                                    <textarea class="form-control" cols="55" rows="14" id="textarea1"></textarea>
                                </div>

                                <div class="mybtn2">
                                    <button class="btn btn-default mybtn" id="cancelBtn">取消</button>

                                </div>
                                <div class="mybtn1">
                                    <button class="btn btn-success mybtn" id="announceBtn">发表</button>

                                </div>

                            </form>
                        </div>
                    </div>

                </div>

                <div class="list">
                    <span>公告列表</span>
                    <div class="list1">
                        <ul class="anm-list">
                            <li><a href="#">[公告主题]省略文.....公告时间</a></li>
                            @for (int i = 0; i < ViewBag.announcementIds.Length; i++)
                            {
                                <li name="@ViewBag.announcementIds[i]"><a href="#">@ViewBag.announcementTitles[i]</a></li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
            <div class="grade-main">
                <div class="selectgrade">
                    <div class="selectcon">
                        <div class="gradetext">
                            <span>设置当前可选题年级</span>
                        </div>
                        <div class="gradeform">
                            <form action="#" method="get">
                                <select id="global-year" class="selectpicker show-tick dropdown" value="<%=search.type||''%>" required>
                                    <option>2014</option>
                                    <option>2015</option>
                                    <option>2016</option>
                                    <option>2017</option>
                                    <option>2018</option>
                                    <option>2019</option>
                                    <option>2020</option>
                                    <option>2021</option>
                                    <option>2022</option>
                                    <option>2023</option>
                                    <option>2024</option>
                                    <option>2025</option>
                                    <option>2026</option>
                                </select>

                            </form>

                        </div>
                        <div class="mybtn3">
                            <button class="btn btn-default" id="set-global-year-btn">确定</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="addAparment">
                <div id="institution" class="tab-pane">

                    <ul class="institute-list" id="deplist">
                        <li class="title" id="schoollist">学院列表</li>
                        @foreach (var department in ViewBag.departments)
                        {
                            <li class="adds">@department</li>
                        }
                        <li class="adds" id="addname"><input type="text" placeholder="请输入学院名字" id="addDepartment" /></li>
                        <li class="adds"><input type="button" value="添加" id="addepart" /></li>
                    </ul>
                </div>
            </div>

            <div class="deleteAparment">
                <div id="institution1" class="tab-pane">
                    <ul class="institute-list">
                        <li class="title">学院列表</li>
                        @foreach (var department in ViewBag.departments)
                        {
                            <li>@department</li><button type="button" name="deleteDepartment" class="btn btn-default">删除</button>
                        }
                    </ul>
                </div>
            </div>

            <div class="addAminstrator">
                <div id="administrator" class="tab-pane">

                    <table class="table-list1" border="1" id="adminList">
                        <caption>管理员列表</caption>
                        @{ string admin = "admin";}
                        <tr><th>编号</th><th>姓名</th><th>所属学院/部门</th></tr>
                        @for (int i = 0; i < ((int)ViewBag.adminCount); i++)
                        {
                            <tr id="@ViewBag.adminIds[i]">
                                <td>@ViewBag.adminIds[i]</td>
                                <td>@ViewBag.adminNames[i]</td>
                                <td>@ViewBag.departmentNames[i]</td>
                            </tr>
                        }
                       
                    </table>

                    <table class="table-list2">
                        <caption>添加管理员</caption>
                        <form>
                            <tr>
                                <td class="la">所属学院/系：</td>
                                <td>
                                    <select id="departmentNameSelect">
                                        @foreach (var department in ViewBag.departments)
                                        {
                                            <option >@department</option>
                                        }
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="la">姓名：</td>
                                <td> 
                                    <select id="teacherNameList" style="width: 144px">
                                        @for (int i = 0; i < ViewBag.teacherCount; i++)
                                        {
                                            <option id="@ViewBag.teacherID[i]">@ViewBag.teacherName[i]</option>
                                        }
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    @*<button class="btn" type="reset">重置</button>*@
                                    <button class="btn"  id="addAdminBtn">添加</button>
                                </td>
                            </tr>
                        </form>
                    </table>

                </div>
            </div>

            <div class="deleteAminstrator">
                <div id="adminstrator1" class="tab-pane">
                    <table class="table-list" border="1" id="deleteAdminTb">
                        <caption>管理员列表</caption>
                        <tr><th></th><th>编号</th><th>姓名</th><th>所属学院/部门</th></tr>
                        @{ string deleteAdmin = "dAdminId";}
                        @for (int i = 0; i < ((int)ViewBag.adminCount); i++)
                        {
                            <tr>
                                <td><button type="button" name="deleteAdmin" class="btn btn-default">删除</button></td>
                                <td id="@deleteAdmin@ViewBag.adminIds[i]">@ViewBag.adminIds[i]</td>
                                <td>@ViewBag.adminNames[i]</td>
                                <td>@ViewBag.departmentNames[i]</td>
                            </tr>
                        }
                    </table>
                </div>
            </div>

            <div class="subject-setup">
                <div id="major-setup" class="tab-pane">
                    <table class="table-list3" border="1" id="MajorTable">
                        <caption>总专业列表</caption>
                        <tr><th>所属学院/系</th><th>专业名称</th><th>选定</th></tr>

                        @foreach (var name in ViewBag.Data)
                        {
                            <tr>
                                <td>信息科学技术学院</td>
                                <td>@name</td>
                                <td><input type="checkbox" class="ch" name="delmajor" value="@name"></td>
                            </tr>
                        }
                        
                       
                        <tr><td colspan="3" align="right"><button type="button" class="btn btn-warning btn-sm" id="delmajor">删除</button></td></tr>
                    </table>

                    <table class="table-list5" border="1">
                        <caption>班级列表</caption>
                        <tr><th>所属学院</th><th>班级名称</th><th>选定</th></tr>

                        @foreach (string classname in ViewBag.ClassName)
                        {
                            <tr>
                                <td>信息科学技术学院</td>
                                <td><a href="#" onclick="openwin()">@classname</a></td>
                                <td><input type="checkbox" name="deleteClass" value="@classname"/></td>
                            </tr>
                        }
                        
                       
                        <tr><td colspan="3"><button type="button" class="btn btn-warning btn-sm" id="delete-class-btn">删除</button></td></tr>
                    </table>
                    <div id="major-top">
                        <!--有修改，添加div包裹两个表单用来清除上面的浮动,表单那里也有修改-->
                        <form class="addform">
                            <table class="table-list4">

                                <tr>
                                    <td class="la">专业名称：</td>
                                    <td><input type="text" class="form-control" id="majorName"/></td>
                                </tr>
                                <tr>
                                    <td class="la">所属学院/系：</td>
                                    <td>
                                        <select class="form-control" id="loadDepartment">
                                            <option>信息科学技术学院</option>
                                            @foreach (var department in ViewBag.departments)
                                            {
                                                <option>@department</option>
                                            }
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>
                                        <button class="btn" id="addMajor">添加专业</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="la"> <label>导入学生列表：</label></td>
                                    <td> <input type="file" class="la2" id="fileName" name="files"/><button id="uploadExcelFile" class="btn">提交文件</button></td>
                                </tr>
                            </table>

                        </form>

                        <form class="add1">
                            <!--添加班级与导入学生列表-->
                            <table>
                                <tr>
                                    <td class="la">班级名称：</td>
                                    <td><input type="text" id="class-name"/></td>
                                </tr>
                                <tr>
                                    <td>班级人数</td>
                                    <td>
                                        <select name="numberofclass" class="form-control" id="human-count">   
                                            <option value="35">35</option>
                                            <option value="36">36</option>
                                            <option value="37">37</option>
                                            <option value="38">38</option>
                                            <option value="39">39</option>
                                            <option value="40">40</option>
                                            <option value="41">41</option>
                                            <option value="42">42</option>
                                            <option value="43">43</option>
                                            <option value="44">44</option>
                                            <option value="45">45</option>
                                            <option value="46">46</option>
                                            <option value="47">47</option>
                                            <option value="48">48</option>
                                            <option value="49">49</option>
                                            <option value="50">50</option>
                                            <option value="51">51</option>
                                            <option value="52">52</option>
                                            <option value="53">53</option>
                                            <option value="54">54</option>
                                            <option value="55">55</option>
                                            <option value="56">56</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>毕业年份</td>
                                    <td>
                                        <select name="graduatingyear" class="form-control" id="graduate-year"> 
                                            <option value="2018">2018</option>
                                            <option value="2019">2019</option>
                                            <option value="2020">2020</option>
                                            <option value="2021">2021</option>
                                            <option value="2022">2022</option>
                                            <option value="2023">2023</option>
                                            <option value="2024">2024</option>
                                            <option value="2025">2025</option>
                                            <option value="2026">2026</option>
                                            <option value="2027">2027</option>
                                            <option value="2028">2028</option>
                                            <option value="2029">2029</option>
                                            <option value="2030">2030</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td><button class="btn Class" id="add-class-btn">添加班级</button></td>
                                </tr>
                                <tr>
                                    <td class="la"><label>导入教师列表：</label></td>
                                    <td><input type="file" class="la2" name="teacherInfo" id="teacherInfo"><button class="btn" id="uploadTeacherInfoBtn">提交文件</button></td>
                                </tr>
                            </table>
                        </form>
                    </div>

                </div>
            </div>

            <div class="intersetup">
                <div class="location">
                    <span>设置导航位置</span>
                    <div class="but">
                        <button id="left" class="btn btn-default">居左</button>
                        <button id="right" class="btn btn-default">居右</button>
                    </div>
                </div>
                <div class="backcolor">
                    <span>设置背景颜色</span>
                    <div class="color">
                        <a href="#" id="color1"><div class="color1"></div></a>
                        <a href="#" id="color2"><div class="color2"></div></a>
                        <a href="#" id="color3"><div class="color3"></div></a>
                        <a href="#" id="color4"><div class="color4"></div></a>
                        <button class="btn btn-success btn1" id="moren">恢复默认</button>
                    </div>
                </div>

            </div>

            <footer class="footer">
                <div class="limits">
                    <p class="limits">Copyright© 2016-2017 BY 88888 .All Rights Reserved</p>
                </div>

                <div class="time">
                </div>
            </footer>
        </div>

    </div>

    <script src="~/Scripts/SystemAdministrator/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/Scripts/SystemAdministrator/bootstrap-select.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/Scripts/bootstrap.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/Scripts/SystemAdministrator/system-administrator.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/Scripts/SystemAdministrator/wangEditor.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/Scripts/SystemAdministrator/ajaxfileupload.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">

    $(function() {
        $('.selectpicker').selectpicker({ noneSelectedText: '选择年级' });
        $('.selectpicker').selectpicker('val', $('.selectpicker').attr('value'));
    });


    //导入学生信息
    $("#uploadExcelFile").click(function() {
        event.preventDefault();
        //alert("刚才被点击了!");
        var url = "/SystemAdmin/ReceiveFile";
        var type = "post";
        var dataType = "json";
        var elementId = "fileName";

        function success(data) {
            alert(data.tip);
        };

        function error(e, status) {
            alert(e);
            alert(status);
        }
        FileUpload(url, type, elementId, dataType, success, error);
    });

    //导入教师信息
    $("#uploadTeacherInfoBtn").click(function () {
        event.preventDefault();
        var url = "/SystemAdmin/ImportTeacherInfo";
        var type = "post";
        var dataType = "json";
        var elementId = "teacherInfo";

        function success(data) {
            alert("服务器端返回的信息为:" + data.tip);
        };

        function error(e, status) {
            alert(e);
            alert(status);
        }

        FileUpload(url, type, elementId, dataType, success, error);
    });

    //文件上传函数
    function FileUpload(url, type, elementId, dataType, successfulResponse, errorResponse) {
        
        $.ajaxFileUpload({
            url: url, //用于文件上传的服务器端请求地址
            type: type, //type有post和get两种方式 
            secureuri: false, //是否需要安全协议，一般设置为false
            fileElementId: elementId, //文件上传域的ID
            dataType: dataType, //返回值类型 一般设置为json
            success: successfulResponse,
            error: errorResponse
        });
    }
</script>
   
</body>
</html>
